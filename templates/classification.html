{% extends 'base.html' %} {% load render_bundle from webpack_loader %} {% load
staticfiles %} {% load crispy_forms_tags %} {% block content %}
<div class="container pt-5">
  <div class="row">
    <div class="col-sm mx-5">
      <h1 class="d-flex justify-content-center mb-5">Kierowcy</h1>
      <table class="table table-bordered css-serial">
        <thead>
          <tr>
            <th>Kierowca</th>
            <th>Punkty</th>
          </tr>
        </thead>

        <tbody>
          {% for obj in object_list %}
          <tr>
            <td>{{ obj }}</td>
            <td>{{ obj.points}}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="col-sm mx-5">
      <h1 class="d-flex justify-content-center mb-5">Zespoły</h1>
      <table class="table table-bordered css-serial">
        <thead>
          <tr>
            <th>Nazwa</th>
            <th>Punkty</th>
            <th>Szef zespołu</th>
          </tr>
        </thead>

        <tbody>
          {% for team in team_list %}

          <tr>
            <td>{{ team}}</td>
            <td><p id="{{ team }}"></p></td>
            <td>{{ team.team_chief}}</td>
          </tr>
          <script>
            var points = 0;
            var team = "{{ team }}";
          </script>
          {% for driver in team.driver.all %}
          <script>
            var driver_points = parseInt("{{ driver.points }}");
            points = points + driver_points;
            if (team == "Racing-Point") {
              points = points - 15;
            }
            console.log(points);
            document.getElementById(team).innerHTML = points;
          </script>
          {% endfor %} {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<script src="{{ settings.WEBPACK_LIVE_SERVER_CONFIG.ADDRESS }}/clock.bundle.js"></script>

{% endblock %}
